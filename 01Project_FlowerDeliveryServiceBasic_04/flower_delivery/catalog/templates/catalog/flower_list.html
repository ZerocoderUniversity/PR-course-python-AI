<!-- catalog/layout.html -->
{% extends 'catalog/layout.html' %}
{% block title %}
    –ö–∞—Ç–∞–ª–æ–≥ —Ü–≤–µ—Ç–æ–≤
{% endblock %}

{% block content %}
    <div class="row">
        <!-- –°–ø–∏—Å–æ–∫ —Ü–≤–µ—Ç–æ–≤ -->
        <div class="col-md-9" style="margin-right: 25%;">
            <h1>–ù–∞—à–∞ –¶–≤–µ—Ç–æ—á–Ω–∞—è –ö–æ–ª–ª–µ–∫—Ü–∏—è</h1>
            <div>
                {% for flower in flowers %}
                    <div id="flower-{{ flower.id }}" style="border: 1px solid #ccc; margin: 10px; padding: 10px;">
                        {% if flower.image %}
                            <img src="{{ flower.image.url }}" alt="{{ flower.name }}" style="width: 300px; height: auto;">
                        {% endif %}
                        <h2>{{ flower.name }}</h2>
                        <p>{{ flower.description }}</p>
                        <p><strong>–¶–µ–Ω–∞:</strong> {{ flower.price }} —Ä—É–±</p>
                        <!-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —è–∫–æ—Ä—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º ID —Ü–≤–µ—Ç–∫–∞ -->
                        <a href="{% url 'add_to_cart' flower.id %}#flower-{{ flower.id }}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –≤ –∫–æ—Ä–∑–∏–Ω—É</a>
                    </div>
                {% empty %}
                    <p>–ù–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤ –Ω–∞–ª–∏—á–∏–∏ –Ω–µ—Ç —Ü–≤–µ—Ç–æ–≤.</p>
                {% endfor %}
            </div>
        </div>

        <!-- –ö–æ—Ä–∑–∏–Ω–∞ -->
        <aside class="col-md-3 bg-light p-4" style="position: fixed; right: 0; top: 10%; width: 20%;">
            <h4>üõí –ö–æ—Ä–∑–∏–Ω–∞</h4>
            {% if cart %}
                <ul class="list-group">
                    {% for item_id, item in cart.items %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
                            {{ item.name }} x {{ item.quantity }} —à—Ç
                            <span>{{ item.total_price_per_item|floatformat:2 }} —Ä—É–±.</span>
                        </li>
                    {% endfor %}
                </ul>
                <hr>
                <p><strong>–ò—Ç–æ–≥–æ: {{ total_price|floatformat:2 }} —Ä—É–±.</strong></p>
                <a href="{% url 'checkout' %}" class="btn btn-success mt-3">–ü–µ—Ä–µ–π—Ç–∏ –∫ –æ–ø–ª–∞—Ç–µ</a>
                <a href="{% url 'clear_cart' %}" class="btn btn-danger mt-3">–û—á–∏—Å—Ç–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É</a>
            {% else %}
                <p>–í–∞—à–∞ –∫–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</p>
            {% endif %}
        </aside>
    </div>
{% endblock %}
