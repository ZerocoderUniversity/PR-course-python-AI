### **Описание проекта**

**Flower Delivery** — это интернет-магазин **Classic Floral Shop**. Проект позволяет пользователям приобретать цветы через веб-интерфейс, управлять заказами и получать уведомления через интеграцию с Telegram-ботом. Административная панель предоставляет возможности для сотрудников магазина управлять заказами и просматривать аналитику продаж.

Проект реализован на Django и включает взаимодействие с Telegram-ботом для улучшения пользовательского опыта и упрощения администрирования.

### **Основные функции проекта:**

**Регистрация и управление пользователями**

- **Регистрация и аутентификация**:
    - Пользователи могут зарегистрироваться, указав уникальные логин и пароль.
    - Доступна аутентификация через форму входа с возможностью восстановления пароля.
- **Управление профилем пользователя**:
    - Пользователи могут редактировать свой профиль, добавляя дополнительную информацию:
        - Имя, фамилия и отчество.
        - Электронная почта.
        - Дата рождения.
    - Доступна регистрация в Telegram-боте через сайт для получения уведомлений.

**Каталог товаров**

- **Просмотр каталога букетов**:
    - Пользователи могут просматривать доступные букеты с фотографиями, описанием и ценой.
    - Каждый букет имеет детальную страницу с подробной информацией и возможностью оставить отзыв.
- **Отзывы о букетах**:
    - Пользователи могут оставлять отзывы о приобретенных букетах, указывая рейтинг и комментарий.
    - Отзывы отображаются на странице каждого букета.

**Корзина покупок**

- **Управление корзиной**:
    - Добавление букетов в корзину с указанием количества.
    - Изменение количества товаров в корзине и удаление позиций.
    - Автоматический пересчет итоговой стоимости в зависимости от количества товаров.

**Управление заказами**

- **Создание и оформление заказа**:
    - Пользователи могут оформить заказ, указав количество товаров, адрес доставки, контактный телефон и желаемую дату/время доставки.
    - Поддержка ввода дополнительной информации (например, пожелания к букету или инструкции для курьера).
- **История заказов**:
    - Пользователи могут просматривать историю своих заказов с указанием статуса каждого заказа.
- **Изменение статусов заказов (только для сотрудников магазина)**:
    - Сотрудники магазина могут изменять статус заказа (например, «Ожидает подтверждения», «В пути», «Доставлен»).
    - Все изменения статуса фиксируются в истории заказов и могут быть просмотрены через административную панель.

**Интеграция с Telegram-ботом**

- **Регистрация в боте**:
    - Пользователи могут зарегистрироваться в Telegram-боте через сайт, чтобы получать уведомления о заказах.
    - Процесс регистрации происходит через команду `/start` с параметром `user_id`, передаваемым из сайта.
- **Уведомления о статусе заказов**:
    - Бот уведомляет пользователей об изменении статуса заказа (например, «Заказ доставлен»).
- **Администраторская функциональность**:
    - Администраторы могут просматривать аналитику продаж через бот.
    - Аналитика включает общее количество заказов, выручку и детализацию по периодам.
- **Просмотр аналитики**:
    - Доступна только администраторам через нажатие инлайн-кнопок в Telegram.
    - Включает графики продаж и текстовые отчеты за выбранный период (неделя, месяц, год).

### **Установка проекта**

1. Склонируйте репозиторий:
    
    ```
    git clone https://github.com/EduardIbatullin/FlowerDelivery-Master.git
    ```
    
2. Перейдите в директорию проекта:
    
    ```
    cd FlowerDelivery-Master
    ```
    
3. Создайте виртуальное окружение и активируйте его:
    
    ```
    python -m venv venv
    source venv/bin/activate
    ```
    
4. Установите зависимости:
    
    ```
    pip install -r requirements.txt
    ```
    
5. Выполните миграции:
    
    ```
    python manage.py migrate
    ```
    
6. Создайте суперпользователя:
    
    ```
    python manage.py createsuperuser
    ```
    
7. В корневой директории проекта создайте файл `.env` со следующим содержимым:
    
    ```
    # Токен вашего Telegram-бота. Сгенерируйте свой токен в @BotFather.
    TELEGRAM_BOT_TOKEN='ваш_токен'
    
    # Уникальный секретный ключ Django. Сгенерируйте свой с помощью команды:
    # python -c "from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())"
    SECRET_KEY='ваш_секретный_ключ'
    
    # Включение режима отладки. Используйте True для разработки и False для продакшена.
    DEBUG=True
    
    # Разрешенные хосты. Укажите хосты, которые могут обращаться к проекту.
    ALLOWED_HOSTS=localhost,127.0.0.1
    
    # URL вашего Django-сервера. Обычно используется для взаимодействия с ботом.
    DJANGO_SERVER_URL='http://127.0.0.1:8000'
    
    ```
    
    > Примечание: Не добавляйте SECRET_KEY и другие конфиденциальные данные в публичный репозиторий GitHub. Храните эти данные только в .env файле, а сам файл добавьте в .gitignore.
    > 
8. Запустите сервер:
    
    ```
    python manage.py runserver
    ```
    
9. Перейдите по адресу `http://127.0.0.1:8000` для проверки работы.

**Запуск Telegram-бота**

Telegram-бот необходимо запускать отдельно от сервера Django:

1. Войдите в директорию с ботом:
    
    ```
    cd bot
    ```
    
2. Запустите бота:
    
    ```
    python bot.py
    ```
    
3. Проверьте работоспособность бота в Telegram.

**Настройка интеграции с Telegram-ботом**

1. Убедитесь, что переменная `TELEGRAM_BOT_TOKEN` указана в файле `.env`:
    
    ```
    TELEGRAM_BOT_TOKEN='ваш_токен'
    
    ```
    
2. Перезапустите сервер и бот для применения изменений.
